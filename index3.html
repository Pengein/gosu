<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ÎÇòÎäî Í≥†ÏàòÎ•º Íµ¨Î∂ÑÌï† Ïàò ÏûàÏùÑÍπå? ü§î</title>

<style>
  html, body {
    margin: 0; padding: 0; height: 100%; width: 100%;
    display: flex; justify-content: center; align-items: center;
    background-color: #2c3e50;
    font-family: 'Noto Sans KR', sans-serif;
    color: #ecf0f1;
    overflow: hidden;
    transition: background-color 0.3s ease;
  }

  /* Îã§ÌÅ¨Î™®Îìú */
  body.dark-mode {
    background-color: #1a1a2e;
    color: #f0f0f0;
  }
  body.dark-mode #startScreen,
  body.dark-mode #quizGameContainer,
  body.dark-mode #gameOverScreen,
  body.dark-mode #optionsScreen,
  body.dark-mode #patchNotesModal {
    background-color: #1f2041;
    box-shadow: 0 10px 25px rgba(0,0,0,0.6);
  }
  body.dark-mode .menu-button,
  body.dark-mode .option-button {
    background-color: #4b4b7c;
  }
  body.dark-mode .menu-button:hover,
  body.dark-mode .option-button:hover {
    background-color: #6a6a9b;
  }
  body.dark-mode #restartButton {
    background-color: #be392a;
  }
  body.dark-mode #restartButton:hover {
    background-color: #a02c1f;
  }
  body.dark-mode #nextButton {
    background-color: #d1871a;
  }
  body.dark-mode #nextButton:hover {
    background-color: #b97615;
  }

  /* ÏãúÏûë ÌôîÎ©¥ */
  #startScreen {
    background-color: #34495e;
    border-radius: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.4);
    padding: 40px 60px;
    width: 90%;
    max-width: 1200px;
    height: 90%;
    max-height: 600px;
    box-sizing: border-box;
    text-align: center;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
  }

  #startScreen h1 {
    font-family: 'Jua', sans-serif;
    color: #f1c40f;
    font-size: 3em;
    margin-bottom: 30px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    white-space: pre-line;
  }

  .menu-buttons-container {
    display: flex;
    flex-direction: column;
    gap: 15px;
    width: 70%;
    max-width: 550px;
    margin: 0 auto;
    box-sizing: border-box;
  }

  .menu-button {
    background-color: #673ab7;
    color: white;
    padding: 18px 35px;
    border: none;
    border-radius: 12px;
    font-size: 1.8em;
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
    box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
    width: 100%;
  }
  .menu-button:hover {
    background-color: #512da8;
    transform: translateY(-3px);
  }
  .menu-button:active {
    transform: translateY(0);
  }

  /* ÌÄ¥Ï¶à Í≤åÏûÑ Ïª®ÌÖåÏù¥ÎÑà */
  #quizGameContainer {
    background-color: #34495e;
    border-radius: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.4);
    padding: 40px;
    text-align: center;
    width: 90%;
    max-width: 800px;
    box-sizing: border-box;
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.5s ease-out, transform 0.5s ease-out, background-color 0.3s ease, box-shadow 0.3s ease;
    display: none;
    min-height: 500px;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
  }

  /* Ïú†ÌäúÎ∏å ÌîåÎ†àÏù¥Ïñ¥ */
  #player-container {
    position: relative;
    width: 100%;
    padding-bottom: 56.25%;
    height: 0;
    overflow: hidden;
    margin-bottom: 30px;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  }
  #player {
    position: absolute;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    border-radius: 10px;
  }

  /* Î°úÎî© Ïä§ÌîºÎÑà */
  #player-loading-spinner {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    border: 5px solid rgba(255,255,255,0.3);
    border-top: 5px solid #3498db;
    border-radius: 50%;
    width: 50px; height: 50px;
    animation: spin 1s linear infinite;
    display: none;
    z-index: 10;
  }
  @keyframes spin {
    0% { transform: translate(-50%, -50%) rotate(0deg);}
    100% { transform: translate(-50%, -50%) rotate(360deg);}
  }

  /* ÏòµÏÖò Ïª®ÌÖåÏù¥ÎÑà */
  #optionsContainer {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 12px;
    margin-top: 20px;
    width: 100%;
  }
  /* ÏòµÏÖò Î≤ÑÌäº */
  .option-button {
    background-color: #3f51b5;
    color: white;
    padding: 12px 20px;
    border: none;
    border-radius: 8px;
    font-size: 1.3em;
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.2s ease;
    flex-grow: 1;
    min-width: 120px;
    max-width: calc(33.333% - 12px);
    box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
    box-sizing: border-box;
  }
  .option-button:hover {
    background-color: #303f9f;
    transform: translateY(-2px);
  }
  .option-button:active {
    transform: translateY(0);
  }

  /* ÌîºÎìúÎ∞± Î©îÏãúÏßÄ */
  #feedbackMessage {
    margin-top: 25px;
    font-size: 1.6em;
    font-weight: bold;
    color: #e74c3c;
    min-height: 30px;
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  #feedbackMessage.correct {
    color: #2ecc71;
  }
  body.color-blind-mode #feedbackMessage.correct {
    color: #007bff;
  }
  body.color-blind-mode #feedbackMessage.wrong {
    color: #ff7f00;
  }

  /* Îã§Ïùå Î≤ÑÌäº */
  #nextButton {
    background-color: #f39c12;
    color: white;
    padding: 15px 40px;
    border: none;
    border-radius: 10px;
    font-size: 1.8em;
    cursor: pointer;
    margin-top: 30px;
    transition: background-color 0.2s ease, transform 0.2s ease;
    box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
    display: none;
  }
  #nextButton:hover {
    background-color: #e67e22;
    transform: translateY(-2px);
  }

  /* Ï†êÏàò Î∞è Î™©Ïà® ÌëúÏãú */
  #scoreLivesContainer {
      display: flex;
      justify-content: space-around;
      width: 100%;
      margin-top: 20px;
      font-size: 1.5em;
      font-weight: bold;
      color: #ecf0f1;
  }
  #scoreDisplay, #livesDisplay {
      min-width: 120px;
  }

  /* Í≤åÏûÑ Ïò§Î≤Ñ ÌôîÎ©¥ */
  #gameOverScreen {
    display: none;
    background-color: #34495e;
    border-radius: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.4);
    padding: 40px;
    text-align: center;
    width: 90%;
    max-width: 800px;
    box-sizing: border-box;
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
    min-height: 400px;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  #gameOverScreen h2 {
    font-family: 'Jua', sans-serif;
    color: #f1c40f;
    font-size: 3.5em;
    margin-bottom: 20px;
  }
  #finalScore {
    font-size: 2.5em;
    color: #2ecc71;
    margin-bottom: 30px;
    font-weight: bold;
  }
  #restartButton {
    background-color: #e74c3c;
    color: white;
    padding: 15px 40px;
    border: none;
    border-radius: 10px;
    font-size: 1.8em;
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.2s ease;
    box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
  }
  #restartButton:hover {
    background-color: #c0392b;
    transform: translateY(-2px);
  }

  /* ÌôîÎ©¥ Î≤àÏ©çÏûÑ Ìö®Í≥º Ïò§Î≤ÑÎ†àÏù¥ */
  #flashOverlay {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    z-index: 9999;
    pointer-events: none;
    opacity: 0;
  }
  @keyframes correctFlash {
    0% { background-color: rgba(0, 255, 0, 0); opacity: 0; }
    50% { background-color: rgba(0, 255, 0, 0.3); opacity: 1; }
    100% { background-color: rgba(0, 255, 0, 0); opacity: 0; }
  }
  @keyframes incorrectFlash {
    0% { background-color: rgba(255, 0, 0, 0); opacity: 0; }
    50% { background-color: rgba(255, 0, 0, 0.3); opacity: 1; }
    100% { background-color: rgba(255, 0, 0, 0); opacity: 0; }
  }
  .flash-correct-active { animation: correctFlash 0.3s ease-out forwards; }
  .flash-incorrect-active { animation: incorrectFlash 0.3s ease-out forwards; }

  /* ÏòµÏÖò ÌôîÎ©¥ Î™®Îã¨ */
  #optionsScreen {
    display: none;
    flex-direction: row; /* Í∞ÄÎ°úÎ∞∞Ïπò */
    justify-content: space-around;
    align-items: flex-start;
    background-color: #34495e;
    border-radius: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.4);
    padding: 40px 60px;
    width: 90%;
    max-width: 900px;
    height: 90%;
    max-height: 500px;
    box-sizing: border-box;
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
    gap: 40px;
  }
  #optionsScreen h2 {
    font-family: 'Jua', sans-serif;
    color: #f1c40f;
    font-size: 2.5em;
    margin-bottom: 30px;
    width: 100%;
    text-align: center;
  }
  .options-group {
    display: flex;
    flex-direction: column;
    width: 200px;
    min-width: 180px;
    align-items: flex-start;
  }
  .options-group label {
    font-size: 1.6em;
    margin-bottom: 15px;
    color: #ecf0f1;
    font-weight: bold;
    text-align: left;
    width: 100%;
  }
  .options-toggle-button {
    width: 100%;
    font-size: 1.6em;
    padding: 10px 0;
    margin-bottom: 10px;
    background-color: #3f51b5;
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.2s ease;
    box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
  }
  .options-toggle-button:hover {
    background-color: #303f9f;
    transform: translateY(-2px);
  }
  .options-toggle-button.active {
    background-color: #28a745;
    box-shadow: 3px 3px 7px rgba(40, 167, 69, 0.4);
  }
  body.dark-mode .options-toggle-button.active {
    background-color: #1e7e34;
  }
  #optionsCloseButton {
    background-color: #e74c3c;
    color: white;
    padding: 15px 40px;
    border: none;
    border-radius: 10px;
    font-size: 1.8em;
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.2s ease;
    box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
    margin-top: auto;
  }
  #optionsCloseButton:hover {
    background-color: #c0392b;
    transform: translateY(-2px);
  }

  /* Ìå®ÏπòÎÖ∏Ìä∏ Î™®Îã¨ */
  #patchNotesModal {
    display: none;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    background-color: #34495e;
    border-radius: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.4);
    padding: 40px;
    width: 90%;
    max-width: 800px;
    height: 90%;
    max-height: 600px;
    box-sizing: border-box;
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
  }
  #patchNotesModal h2 {
    font-family: 'Jua', sans-serif;
    color: #f1c40f;
    font-size: 2.5em;
    margin-bottom: 25px;
    text-align: center;
  }
  #patchNotesContent {
    width: 100%;
    flex-grow: 1;
    overflow-y: auto;
    padding-right: 10px;
    line-height: 1.8;
    text-align: left;
  }
  /* Ìå®ÏπòÎÖ∏Ìä∏ HTML ÏöîÏÜå Ïä§ÌÉÄÏùº */
  #patchNotesContent h3 {
    color: #f1c40f;
    font-size: 1.5em;
    margin-top: 20px;
    margin-bottom: 5px;
    border-bottom: 2px solid #f1c40f;
    padding-bottom: 5px;
  }
  #patchNotesContent ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
  }
  #patchNotesContent ul li {
    margin-bottom: 8px;
    position: relative;
    padding-left: 20px;
  }
  /* Î≤ÑÏ†Ñ Ìó§Îî© Ïä§ÌÉÄÏùº (ÏàòÏ†ïÎê®) */
  #patchNotesContent ul li.patch-version-heading {
      color: #6aabff; /* ÌååÎûÄÏÉâÏúºÎ°ú Î≤ÑÏ†Ñ Í∞ïÏ°∞ */
      font-weight: bold;
      margin-top: 10px;
      margin-bottom: 5px;
  }
  #patchNotesContent ul li.patch-version-heading::before {
      content: '‚ñ∏'; /* ÌôîÏÇ¥Ìëú Î∂àÎ¶ø */
      color: #6aabff;
      font-size: 1.2em;
      left: 0;
      top: -2px;
  }
  /* Ïã§Ï†ú Ìå®Ïπò ÎÇ¥Ïö© ÏïÑÏù¥ÌÖú */
  #patchNotesContent ul li.patch-note-item {
      font-size: 0.95em;
      padding-left: 25px; /* Îì§Ïó¨Ïì∞Í∏∞ */
      color: #ccc; /* ÎÇ¥Ïö© Í∏ÄÏî®ÏÉâ */
  }
  #patchNotesContent ul li.patch-note-item::before {
      content: '‚Ä¢';
      color: #2ecc71;
      font-size: 1em;
      left: 10px; /* Î∂àÎ¶ø ÏúÑÏπò Ï°∞Ï†ï */
      top: 0px;
  }

  #patchNotesCloseButton {
    background-color: #607d8b;
    color: white;
    padding: 15px 40px;
    border: none;
    border-radius: 10px;
    font-size: 1.8em;
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.2s ease;
    box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
    margin-top: 30px;
  }
  #patchNotesCloseButton:hover {
    background-color: #455a64;
    transform: translateY(-2px);
  }


  /* Î∞òÏùëÌòï Î™®Î∞îÏùº */
  @media (max-width: 768px) {
    #startScreen h1 {
      font-size: 2.2em;
      margin-bottom: 20px;
    }
    .menu-buttons-container {
      width: 90%;
      gap: 10px;
    }
    .menu-button {
      font-size: 1.3em;
      padding: 15px 25px;
    }
    #quizGameContainer, #startScreen, #gameOverScreen, #optionsScreen, #patchNotesModal {
      padding: 20px;
    }
    #player-container {
      margin-bottom: 20px;
    }
    .option-button {
      font-size: 1.1em;
      padding: 10px 15px;
      min-width: 100px;
      max-width: calc(50% - 12px);
    }
    #feedbackMessage {
      font-size: 1.3em;
    }
    #nextButton, #restartButton, .options-toggle-button {
      font-size: 1.5em;
      padding: 12px 30px;
    }
    #gameOverScreen h2 {
      font-size: 2.5em;
    }
    #finalScore {
      font-size: 2em;
    }
    #scoreLivesContainer {
        font-size: 1.2em;
    }
    #optionsScreen {
      flex-direction: column !important;
      max-width: 600px !important;
      gap: 25px !important;
      padding: 40px 30px !important;
      height: 90% !important;
      max-height: 500px !important;
    }
    .options-group {
      width: 100% !important;
      align-items: center !important;
    }
    .options-group label {
      text-align: center !important;
    }
    .options-toggle-button {
      width: 80% !important;
      font-size: 1.5em !important;
    }
    /* Ìå®ÏπòÎÖ∏Ìä∏ Î™®Îã¨ Î™®Î∞îÏùº ÏµúÏ†ÅÌôî */
    #patchNotesModal h2 {
      font-size: 2em;
      margin-bottom: 15px;
    }
    #patchNotesContent h3 {
      font-size: 1.3em;
      margin-top: 15px;
    }
  }

  @media (max-width: 480px) {
    .option-button {
      max-width: 100%;
    }
  }
</style>
</head>
<body>
  <!-- ÏãúÏûë ÌôîÎ©¥ -->
  <div id="startScreen">
    <h1>ÎÇòÎäî Í≥†ÏàòÎ•º Íµ¨Î∂ÑÌï† Ïàò ÏûàÏùÑÍπå? ü§î</h1>
    <div class="menu-buttons-container">
      <button id="startButton" class="menu-button">ÏãúÏûë üöÄ</button>
      <button id="optionsButton" class="menu-button">ÏòµÏÖò ‚öôÔ∏è</button>
      <button id="discordButton" class="menu-button">ÎîîÏä§ÏΩîÎìú üëæ</button>
      <button id="patchNotesButton" class="menu-button">Ìå®ÏπòÎÖ∏Ìä∏ üìù</button>
    </div>
  </div>

  <!-- ÌÄ¥Ï¶à Í≤åÏûÑ Ïª®ÌÖåÏù¥ÎÑà -->
  <div id="quizGameContainer">
    <div id="player-container"><div id="player"></div><div id="player-loading-spinner"></div></div>
    <div id="optionsContainer"></div>
    <div id="feedbackMessage"></div>
    <button id="nextButton">Îã§Ïùå ‚û°Ô∏è</button>
    <!-- ÌÄ¥Ï¶à Ï§ë Î©îÎâ¥Î°ú ÎèåÏïÑÍ∞ÄÍ∏∞ Î≤ÑÌäº -->
    <button id="returnToMenuBtn" class="menu-button" style="background-color: #607d8b; margin-top: 20px;">
        Î©îÎâ¥Î°ú ÎèåÏïÑÍ∞ÄÍ∏∞
    </button>
    <div id="scoreLivesContainer">
      <div id="scoreDisplay">Ï†êÏàò: 0</div>
      <div id="livesDisplay">Î™©Ïà®: ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
    </div>
  </div>

  <!-- Í≤åÏûÑ Ïò§Î≤Ñ ÌôîÎ©¥ -->
  <div id="gameOverScreen">
    <h2>Í≤åÏûÑ Ï¢ÖÎ£å! üéâ</h2>
    <div id="finalScore"> ÏµúÏ¢Ö Ï†êÏàò: 0Ï†ê </div>
    <button id="restartButton">Îã§Ïãú ÏãúÏûëÌïòÍ∏∞ üîÑ</button>
  </div>

  <!-- ÌôîÎ©¥ Î≤àÏ©çÏù¥Îäî Ìö®Í≥ºÎ•º ÏúÑÌïú Ïò§Î≤ÑÎ†àÏù¥ -->
  <div id="flashOverlay"></div>

  <!-- ÏòµÏÖò ÏÑ§Ï†ï ÌôîÎ©¥ -->
  <div id="optionsScreen">
    <h2>ÏÑ§Ï†ï ‚öôÔ∏è</h2>
    <div class="options-group">
      <label for="darkModeToggle">ÏïºÍ∞Ñ Î™®Îìú</label>
      <button id="darkModeToggle" class="options-toggle-button">ÎπÑÌôúÏÑ±Ìôî</button>
    </div>
    <div class="options-group">
      <label for="colorBlindModeToggle">ÏÉâÎßπ Î™®Îìú (Ï†ïÎãµ/Ïò§Îãµ ÏÉâÏÉÅ)</label>
      <button id="colorBlindModeToggle" class="options-toggle-button">ÎπÑÌôúÏÑ±Ìôî</button>
    </div>
    <div class="options-group">
      <label for="reduceMotionToggle">Í¥ëÍ≥ºÎØºÏÑ± Î∞úÏûë Î∞©ÏßÄ Î™®Îìú (Î≤àÏ©çÏûÑ Ìö®Í≥º Ï†úÍ±∞)</label>
      <button id="reduceMotionToggle" class="options-toggle-button">ÎπÑÌôúÏÑ±Ìôî</button>
    </div>
    <button id="optionsCloseButton" class="menu-button">Îã´Í∏∞</button>
  </div>

  <!-- Ìå®ÏπòÎÖ∏Ìä∏ Î™®Îã¨ -->
  <div id="patchNotesModal">
    <h2>Ìå®ÏπòÎÖ∏Ìä∏ üìù</h2>
    <div id="patchNotesContent">
      <!-- Ìå®ÏπòÎÖ∏Ìä∏ ÎÇ¥Ïö©Ïù¥ JavaScriptÏóêÏÑú ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§. -->
    </div>
    <button id="patchNotesCloseButton" class="menu-button">Îã´Í∏∞</button>
  </div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
  let player;
  let isPlayerReady = false;
  let currentVideoEndTime = -1; // ÌòÑÏû¨ Ïû¨ÏÉù Ï§ëÏù∏ ÏòÅÏÉÅÏùò Ï¢ÖÎ£å ÏãúÍ∞Ñ
  let videoEndInterval; // ÏòÅÏÉÅ Ï¢ÖÎ£åÎ•º Ï≤¥ÌÅ¨Ìï† Ïù∏ÌÑ∞Î≤å

  const categories = ["ÏùºÎ∞ò", "4Íµ∞", "3Íµ∞", "2Íµ∞", "1Íµ∞", "Ï£ºÎ†•", "Í∞ïÏ£ºÎ†•", "ÏÑ†ÏàòÍ∏â"];
  const MAX_LIVES = 5;

  // --- Ìå®ÏπòÎÖ∏Ìä∏ Îç∞Ïù¥ÌÑ∞ (Ïó¨Í∏∞ÏÑú ÎÇ¥Ïö© Í¥ÄÎ¶¨!) ---
  const patchNotesData = [
    {
      version: "1.0.8",
      date: "2025.08.15", // Í∏∞Ï°¥ 1.0.7Í≥º ÎèôÏùºÌïú ÎÇ†Ïßú
      notes: [
        "Ìå®ÏπòÎÖ∏Ìä∏ ÎÇ†ÏßúÎ≥Ñ Î¨∂Ïùå Í∏∞Îä• Í∞úÏÑ†: Ïù¥Ï†ú Í∞ôÏùÄ ÎÇ†Ïßú Ìå®ÏπòÎäî Ìïú Î≤àÏùò Ìó§Îî©ÏúºÎ°ú ÌëúÏãúÎê©ÎãàÎã§.",
        "Ìå®ÏπòÎÖ∏Ìä∏ UI Í∞úÏÑ†: Î≤ÑÏ†ÑÎ≥Ñ Íµ¨Î∂Ñ Î∞è ÎÇ¥Ïö© Í∞ÄÎèÖÏÑ± Ìñ•ÏÉÅ"
      ]
    },
    {
      version: "1.0.7",
      date: "2025.08.15",
      notes: [
        "Í∏¥Í∏â Í≥µÏßÄ Í∏∞Îä• Ï†úÍ±∞ (Ïù¥Ï†ú Î∂àÌïÑÏöîÌïú Í∏∞Îä•ÏùÄ ÏÇ≠Ï†ú!)",
        "Ìå®ÏπòÎÖ∏Ìä∏ ÎÇ¥Ïö© JS Í¥ÄÎ¶¨ Î∞©ÏãùÏúºÎ°ú Ï†ÑÌôò: AIÍ∞Ä 'ÎØ∏Î¶¨' ÏûëÏÑ±Ìï¥Ï§Ä ÎÇ¥Ïö©ÏùÑ Î≥µÎ∂ôÌïòÎ©¥ ÎÅù!",
        "Ìå®ÏπòÎÖ∏Ìä∏ Í¥ÄÎ¶¨ Î∞©Ïãù ÏïàÎÇ¥: Î§ºÌäº Îì± ÌÖçÏä§Ìä∏ ÏÉùÏÑ± AIÎ•º ÌôúÏö©ÌïòÎ©¥ Îçî ÏâΩÍ≤å ÏûëÏÑ± Í∞ÄÎä•!"
      ]
    },
    {
      version: "1.0.6",
      date: "2025.08.14",
      notes: [
        "Ïú†ÌäúÎ∏å ÏòÅÏÉÅ ÌäπÏ†ï Íµ¨Í∞Ñ Ïû¨ÏÉù Í∏∞Îä• Ï∂îÍ∞Ä (ÏãúÏûë/Ï¢ÖÎ£å ÏãúÍ∞Ñ ÏÑ§Ï†ï Í∞ÄÎä•)"
      ]
    },
    {
      version: "1.0.5",
      date: "2025.08.13",
      notes: [
        "Ìå®ÏπòÎÖ∏Ìä∏ Í∏∞Îä• Ï∂îÍ∞Ä: Ïù¥Ï†ú Ïù¥ ÌôîÎ©¥ÏóêÏÑú ÏóÖÎç∞Ïù¥Ìä∏ ÎÇ¥Ïó≠ ÌôïÏù∏ Í∞ÄÎä•!",
        "ÌÄ¥Ï¶à Ï§ë 'Î©îÎâ¥Î°ú ÎèåÏïÑÍ∞ÄÍ∏∞' Î≤ÑÌäº Ï∂îÍ∞Ä: ÌôïÏù∏ Ï†àÏ∞®Î•º ÌÜµÌï¥ Ïã§Ïàò Î∞©ÏßÄ",
        "ÏòµÏÖò UI Í∞úÏÑ†: PC ÌôòÍ≤ΩÏóêÏÑú ÏÑ§Ï†ïÏ∞Ω Í∞ÄÎ°úÎ°ú ÎÑìÍ≤å Ïû¨Î∞∞Ïπò"
      ]
    },
    {
      version: "1.0.4",
      date: "2025.08.13",
      notes: [
        "Ï†ëÍ∑ºÏÑ± ÏòµÏÖò Ï∂îÍ∞Ä: ÏïºÍ∞Ñ Î™®Îìú, ÏÉâÎßπ Î™®Îìú, Í¥ëÍ≥ºÎØºÏÑ± Î∞úÏûë Î∞©ÏßÄ Î™®Îìú (Î≤àÏ©çÏûÑ Ìö®Í≥º Ï†úÍ±∞)",
        "ÏÑ§Ï†ïÍ∞í LocalStorageÏóê Ï†ÄÏû•: Ïï± Ï¢ÖÎ£å ÌõÑÏóêÎèÑ ÏÑ§Ï†ï Ïú†ÏßÄ"
      ]
    },
    {
      version: "1.0.3",
      date: "2025.08.12",
      notes: [
        "ÌÄ¥Ï¶à Ï†ï/Ïò§Îãµ Ïãú ÌôîÎ©¥ Î≤àÏ©çÏûÑ Ìö®Í≥º Ï∂îÍ∞Ä: ÏãúÍ∞ÅÏ†Å ÌîºÎìúÎ∞± Í∞ïÌôî",
        "Î™©Ïà® ÏãúÏä§ÌÖú Íµ¨ÌòÑ: ÏãúÏûë 3Í∞ú, ÌãÄÎ¶¨Î©¥ Ï∞®Í∞ê, 3Ïó∞ÏÜç Ï†ïÎãµ Ïãú 1Í∞ú ÌöçÎìù (ÏµúÎåÄ 5Í∞ú)"
      ]
    },
    {
      version: "1.0.2",
      date: "2025.08.12",
      notes: [
        "Î©îÏù∏ Î©îÎâ¥ UI ÎîîÏûêÏù∏ Í∞úÏÑ†: Î≤ÑÌäº Í∞ÑÍ≤© Î∞è Ï†ÑÏ≤¥Ï†ÅÏù∏ ÎÑìÏù¥ Ï°∞Ï†ï",
        "Ïú†ÌäúÎ∏å ÏòÅÏÉÅ Í∏∞Î∞ò ÌÄ¥Ï¶à ÏãúÏä§ÌÖú Íµ¨Ï∂ï: Î¨∏Ï†úÏóê ÏòÅÏÉÅ Ìè¨Ìï®"
      ]
    },
    {
      version: "1.0.1",
      date: "2025.08.11",
      notes: [
        "Ï¥àÍ∏∞ Î≤ÑÏ†Ñ Ï∂úÏãú: 'ÎÇòÎäî Í≥†ÏàòÎ•º Íµ¨Î∂ÑÌï† Ïàò ÏûàÏùÑÍπå?' ÌÄ¥Ï¶à Í≤åÏûÑ ÏãúÏûë"
      ]
    }
  ];

  // Î¨∏Ï†ú Îç∞Ïù¥ÌÑ∞ - Ïú†ÌäúÎ∏å ÏòÅÏÉÅ ID, Ï†ïÎãµ Îì±Í∏â, ÏãúÏûë/Ï¢ÖÎ£å ÏãúÍ∞Ñ
  const questions = [
{ youtubeId: "4wmi_guc8ZM", answerCategory: "Ï£ºÎ†•"}, 
{ youtubeId: "HgdpVld1M60", answerCategory: "Ï£ºÎ†•"}, 
{ youtubeId: "0i8UI6HmUUI", answerCategory: "2Íµ∞"}, 
{ youtubeId: "-Vb3_eAQddc", answerCategory: "3Íµ∞"}, 
{ youtubeId: "VDIEVttNMzY", answerCategory: "3Íµ∞"}, 
{ youtubeId: "go5t5sn7g4c", answerCategory: "3Íµ∞"}, 
{ youtubeId: "dzJTA_IqKRY", answerCategory: "1Íµ∞"}, 
{ youtubeId: "xGWyI1CRLOU", answerCategory: "2Íµ∞"}, 
{ youtubeId: "e1Q53xjKaCo", answerCategory: "1Íµ∞"}, 
{ youtubeId: "jc338Na84VA", answerCategory: "1Íµ∞"},    // Ïó¨Í∏∞Ïóê Î¨∏Ï†úÎ•º Îçî Ï∂îÍ∞ÄÌï† Ïàò ÏûàÏñ¥!
    // { youtubeId: "ÏÉàÎ°úÏö¥_ÏòÅÏÉÅ_ID", answerCategory: "Ï†ïÎãµ_Îì±Í∏â", startTime: 0, endTime: 60 },
  ];

  let shuffledQuestions = []; // ÌòÑÏû¨ Í≤åÏûÑ ÏÑ∏ÏÖòÏùò Î¨¥ÏûëÏúÑ Î¨∏Ï†ú ÏàúÏÑúÎ•º Ï†ÄÏû•Ìï† Î∞∞Ïó¥

  let currentQuestionIndex = 0;
  let score = 0;
  let lives = 3;
  let consecutiveCorrectAnswers = 0;
  let selectedOptionIndex = null;

  const htmlBody = document.body;
  const startScreen = document.getElementById('startScreen');
  const quizGameContainer = document.getElementById('quizGameContainer');
  const gameOverScreen = document.getElementById('gameOverScreen');
  const optionsScreen = document.getElementById('optionsScreen');
  const patchNotesModal = document.getElementById('patchNotesModal');
  const startButton = document.getElementById('startButton');
  const optionsButton = document.getElementById('optionsButton');
  const discordButton = document.getElementById('discordButton');
  const patchNotesButton = document.getElementById('patchNotesButton');
  const playerLoadingSpinner = document.getElementById('player-loading-spinner');
  const optionsContainer = document.getElementById('optionsContainer');
  const feedbackMessage = document.getElementById('feedbackMessage');
  const nextButton = document.getElementById('nextButton');
  const scoreDisplay = document.getElementById('scoreDisplay');
  const livesDisplay = document.getElementById('livesDisplay');
  const finalScore = document.getElementById('finalScore');
  const restartButton = document.getElementById('restartButton');
  const flashOverlay = document.getElementById('flashOverlay');
  const returnToMenuBtn = document.getElementById('returnToMenuBtn');

  // ÏòµÏÖò ÌÜ†Í∏Ä Î≤ÑÌäºÎì§
  const darkModeToggle = document.getElementById('darkModeToggle');
  const colorBlindModeToggle = document.getElementById('colorBlindModeToggle');
  const reduceMotionToggle = document.getElementById('reduceMotionToggle');
  const optionsCloseButton = document.getElementById('optionsCloseButton');
  // Î™®Îã¨ Îã´Í∏∞ Î≤ÑÌäºÎì§
  const patchNotesCloseButton = document.getElementById('patchNotesCloseButton');

  let settings = {
    darkMode: false,
    colorBlindMode: false,
    reduceMotion: false
  };

  // --- ÏÑ§Ï†ï Í¥ÄÎ†® Ìï®Ïàò ---
  function loadSettings() {
    const savedSettings = JSON.parse(localStorage.getItem('gameSettings'));
    if (savedSettings) {
      settings = { ...settings, ...savedSettings };
    }
    applySettings();
  }

  function applySettings() {
    htmlBody.classList.toggle('dark-mode', settings.darkMode);
    darkModeToggle.textContent = settings.darkMode ? 'ÌôúÏÑ±Ìôî' : 'ÎπÑÌôúÏÑ±Ìôî';
    darkModeToggle.classList.toggle('active', settings.darkMode);

    htmlBody.classList.toggle('color-blind-mode', settings.colorBlindMode);
    colorBlindModeToggle.textContent = settings.colorBlindMode ? 'ÌôúÏÑ±Ìôî' : 'ÎπÑÌôúÏÑ±Ìôî';
    colorBlindModeToggle.classList.toggle('active', settings.colorBlindMode);

    htmlBody.classList.toggle('reduce-motion-mode', settings.reduceMotion);
    reduceMotionToggle.textContent = settings.reduceMotion ? 'ÌôúÏÑ±Ìôî' : 'ÎπÑÌôúÏÑ±Ìôî';
    reduceMotionToggle.classList.toggle('active', settings.reduceMotion);
  }

  function saveSettings() {
    localStorage.setItem('gameSettings', JSON.stringify(settings));
  }

  // --- ÌôîÎ©¥ Ï†ÑÌôò Í¥ÄÎ†® Ìï®Ïàò ---
  function hideAllScreens() {
    startScreen.style.display = 'none';
    quizGameContainer.style.display = 'none';
    gameOverScreen.style.display = 'none';
    optionsScreen.style.display = 'none';
    patchNotesModal.style.display = 'none';
  }

  function showScreen(screenElement) {
    hideAllScreens();
    screenElement.style.display = 'flex';
    setTimeout(() => {
      screenElement.style.opacity = '1';
      screenElement.style.transform = 'translateY(0)';
    }, 100);
  }

  function openOptionsScreen() {
    showScreen(optionsScreen);
  }

  function closeOptionsScreen() {
    showScreen(startScreen);
  }

  function openPatchNotesScreen() {
    populatePatchNotes(); // Ìå®ÏπòÎÖ∏Ìä∏ ÎÇ¥Ïö© ÎèôÏ†Å ÏÉùÏÑ±
    showScreen(patchNotesModal);
  }

  function closePatchNotesScreen() {
    showScreen(startScreen);
  }

  // --- Ïú†ÌäúÎ∏å ÌîåÎ†àÏù¥Ïñ¥ Í¥ÄÎ†® Ìï®Ïàò ---
  function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
      videoId: 'vBfPzVd0y1s', // Ï¥àÍ∏∞ Î°úÎìúÌï† ÎçîÎØ∏ ÏòÅÏÉÅ ID (ÌïÑÏàò)
      playerVars: {
        'playsinline': 1,
        'autoplay': 0,
        'rel': 0,
        'controls': 1,
        'enablejsapi': 1
      },
      events: { onReady: onPlayerReady, onStateChange: onPlayerStateChange }
    });
  }

  function onPlayerReady() {
    isPlayerReady = true;
    playerLoadingSpinner.style.display = 'none';
  }

  function onPlayerStateChange(event) {
    if (event.data == YT.PlayerState.PLAYING) {
      playerLoadingSpinner.style.display = 'none';
      if (currentVideoEndTime !== -1) {
          videoEndInterval = setInterval(() => {
              if (player.getCurrentTime() >= currentVideoEndTime) {
                  player.pauseVideo();
                  clearInterval(videoEndInterval);
              }
          }, 100);
      }
    } else if (event.data == YT.PlayerState.BUFFERING) {
      playerLoadingSpinner.style.display = 'block';
      clearInterval(videoEndInterval);
    } else {
      clearInterval(videoEndInterval);
    }
  }

  // --- UI ÏóÖÎç∞Ïù¥Ìä∏ Ìï®Ïàò ---
  function updateLivesDisplay() {
    let hearts = '';
    for (let i = 0; i < lives; i++) {
      hearts += '‚ù§Ô∏è';
    }
    livesDisplay.innerHTML = `Î™©Ïà®: ${hearts}`;
  }

  function triggerFlash(type) {
    if (settings.reduceMotion) {
      flashOverlay.classList.remove('flash-correct-active', 'flash-incorrect-active');
      return;
    }
    flashOverlay.classList.remove('flash-correct-active', 'flash-incorrect-active');
    if (type === 'correct') {
      flashOverlay.classList.add('flash-correct-active');
    } else if (type === 'incorrect') {
      flashOverlay.classList.add('flash-incorrect-active');
    }
    setTimeout(() => {
      flashOverlay.classList.remove('flash-correct-active', 'flash-incorrect-active');
    }, 500);
  }

  // --- Ìå®ÏπòÎÖ∏Ìä∏ ÎÇ¥Ïö© ÎèôÏ†Å ÏÉùÏÑ± (ÎÇ†ÏßúÎ≥Ñ Î¨∂Ïùå Î∞è Î≤ÑÏ†ÑÎ≥Ñ Ï†ïÎ†¨ Í∞úÏÑ†) ---
  function populatePatchNotes() {
    const contentDiv = document.getElementById('patchNotesContent');
    contentDiv.innerHTML = '';

    const groupedByDate = {};
    patchNotesData.forEach(patch => {
        if (!groupedByDate[patch.date]) {
            groupedByDate[patch.date] = [];
        }
        groupedByDate[patch.date].push(patch);
    });

    const sortedDates = Object.keys(groupedByDate).sort((a, b) => {
        const dateA = new Date(a.replace(/\./g, '-'));
        const dateB = new Date(b.replace(/\./g, '-'));
        return dateB - dateA;
    });

    sortedDates.forEach(date => {
        const dateSection = document.createElement('div');
        dateSection.innerHTML = `<h3>${date}</h3>`;

        const ul = document.createElement('ul');
        groupedByDate[date].sort((a, b) => {
            const parseVersion = (v) => v.split('.').map(Number);
            const versionA = parseVersion(a.version);
            const versionB = parseVersion(b.version);
            for (let i = 0; i < Math.max(versionA.length, versionB.length); i++) {
                const numA = versionA[i] || 0;
                const numB = versionB[i] || 0;
                if (numA !== numB) return numB - numA;
            }
            return 0;
        }).forEach(patch => {
            const versionLi = document.createElement('li');
            versionLi.classList.add('patch-version-heading');
            versionLi.textContent = `v${patch.version}:`;
            ul.appendChild(versionLi);

            patch.notes.forEach(note => {
                const noteLi = document.createElement('li');
                noteLi.classList.add('patch-note-item');
                noteLi.textContent = note;
                ul.appendChild(noteLi);
            });
        });
        dateSection.appendChild(ul);
        contentDiv.appendChild(dateSection);
    });
  }

  // --- Î∞∞Ïó¥ ÏÑûÍ∏∞ Ìï®Ïàò (Fisher-Yates shuffle) ---
  function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]]; // ÏöîÏÜå ÍµêÌôò
      }
      return array;
  }

  // --- Í≤åÏûÑ Î°úÏßÅ Ìï®Ïàò ---
  function loadQuestion(index) {
    feedbackMessage.style.opacity = '0';
    nextButton.style.display = 'none';
    optionsContainer.innerHTML = '';
    selectedOptionIndex = null;
    clearInterval(videoEndInterval);

    if (index < shuffledQuestions.length) { // ÏÑûÏù∏ Î¨∏Ï†ú Î∞∞Ïó¥ ÏÇ¨Ïö©
      const q = shuffledQuestions[index]; // ÏÑûÏù∏ Î¨∏Ï†úÏóêÏÑú Í∞ÄÏ†∏Ïò§Í∏∞
      if (isPlayerReady && player) {
          playerLoadingSpinner.style.display = 'block';
          player.loadVideoById({
              videoId: q.youtubeId,
              startSeconds: q.startTime || 0
          });
          currentVideoEndTime = q.endTime || -1;
      } else {
          console.error("YouTube Player is not ready yet.");
      }

      categories.forEach((category, i) => {
        const btn = document.createElement('button');
        btn.textContent = category;
        btn.classList.add('option-button');
        btn.addEventListener('click', () => selectOption(i));
        optionsContainer.appendChild(btn);
      });
    } else {
      showGameOverScreen();
    }
  }

  function selectOption(selectedIndex) {
    if (selectedOptionIndex !== null) return;
    if (player && player.getPlayerState() === YT.PlayerState.PLAYING) {
      player.pauseVideo();
    }
    clearInterval(videoEndInterval);

    selectedOptionIndex = selectedIndex;
    const currentQuestion = shuffledQuestions[currentQuestionIndex]; // ÏÑûÏù∏ Î¨∏Ï†ú Î∞∞Ïó¥ ÏÇ¨Ïö©
    const correctIndex = categories.indexOf(currentQuestion.answerCategory);
    const optionButtons = document.querySelectorAll('.option-button');

    optionButtons.forEach(btn => btn.disabled = true);

    if (selectedIndex === correctIndex) {
      feedbackMessage.textContent = "Ï†ïÎãµ! Ïó≠Ïãú Í≥†ÏàòÍµ∞ üòé";
      feedbackMessage.classList.remove('wrong');
      feedbackMessage.classList.add('correct');
      score++;
      scoreDisplay.textContent = `Ï†êÏàò: ${score}`;
      consecutiveCorrectAnswers++;
      triggerFlash('correct');

      if (consecutiveCorrectAnswers === 3) {
        if (lives < MAX_LIVES) {
          lives++;
          feedbackMessage.textContent += " Î™©Ïà® 1Í∞ú ÌöçÎìù! üéâ";
        } else {
          feedbackMessage.textContent += " Î™©Ïà® ÏµúÎåÄÏπò! üí™";
        }
        consecutiveCorrectAnswers = 0;
      }
    } else {
      feedbackMessage.textContent = "ÏïÑÏâΩÏßÄÎßå ÌãÄÎ†∏Ïñ¥ üò• Ï¢Ä Îçî Í≥†ÏàòÏùò Í∏∏ÏùÑ Í±∑Ïûê!";
      feedbackMessage.classList.remove('correct');
      feedbackMessage.classList.add('wrong');

      optionButtons[correctIndex].style.backgroundColor = '#2ecc71';
      optionButtons[selectedIndex].style.backgroundColor = '#e74c3c';

      lives--;
      consecutiveCorrectAnswers = 0;
      triggerFlash('incorrect');

      if (lives <= 0) {
        feedbackMessage.textContent += " Î™©Ïà® ÏÜåÏßÑ! üíÄ";
        updateLivesDisplay();
        setTimeout(() => showGameOverScreen(), 1000);
        return;
      }
    }
    updateLivesDisplay();
    feedbackMessage.style.opacity = '1';
    nextButton.style.display = 'block';
  }

  function showGameOverScreen() {
    quizGameContainer.style.opacity = '0';
    quizGameContainer.style.transform = 'translateY(-20px)';
    if (player) player.stopVideo();
    clearInterval(videoEndInterval);
    setTimeout(() => {
      quizGameContainer.style.display = 'none';
      showScreen(gameOverScreen);
    }, 500);
    finalScore.textContent = `ÏµúÏ¢Ö Ï†êÏàò: ${score}Ï†ê`;
  }

  // --- Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà ---
  startButton.addEventListener('click', () => {
    hideAllScreens();
    showScreen(quizGameContainer);
    resetGameState(); // Í≤åÏûÑ ÏãúÏûë Ïãú ÏÉÅÌÉú Ï¥àÍ∏∞Ìôî Î∞è Î¨∏Ï†ú ÏÑûÍ∏∞
    loadQuestion(currentQuestionIndex);
  });

  optionsButton.addEventListener('click', openOptionsScreen);
  discordButton.addEventListener('click', () => {
    const discordLink = 'https://discord.gg/nYWExhkYeG'; // TODO: ÎîîÏä§ÏΩîÎìú ÎßÅÌÅ¨ ÏÑ§Ï†ï!
    alert('ÎîîÏä§ÏΩîÎìú Ïª§ÎÆ§ÎãàÌã∞Î°ú Ïù¥ÎèôÌï†Í≤å!');
    window.open(discordLink, '_blank');
  });
  patchNotesButton.addEventListener('click', openPatchNotesScreen);

  darkModeToggle.addEventListener('click', () => {
    settings.darkMode = !settings.darkMode;
    applySettings();
    saveSettings();
  });
  colorBlindModeToggle.addEventListener('click', () => {
    settings.colorBlindMode = !settings.colorBlindMode;
    applySettings();
    saveSettings();
  });
  reduceMotionToggle.addEventListener('click', () => {
    settings.reduceMotion = !settings.reduceMotion;
    applySettings();
    saveSettings();
  });
  optionsCloseButton.addEventListener('click', closeOptionsScreen);
  patchNotesCloseButton.addEventListener('click', closePatchNotesScreen);

  nextButton.addEventListener('click', () => {
    currentQuestionIndex++;
    loadQuestion(currentQuestionIndex);
  });

  // Í≤åÏûÑ Ïû¨ÏãúÏûë Î∞è Î©îÎâ¥ ÎèåÏïÑÍ∞ÄÍ∏∞ Î°úÏßÅ (resetGameStateÎ°ú ÌÜµÌï© Í¥ÄÎ¶¨)
  function resetGameState() {
    currentQuestionIndex = 0;
    score = 0;
    lives = 3;
    consecutiveCorrectAnswers = 0;
    scoreDisplay.textContent = `Ï†êÏàò: 0`;
    updateLivesDisplay();
    selectedOptionIndex = null;
    feedbackMessage.textContent = '';
    feedbackMessage.style.opacity = '0';
    nextButton.style.display = 'none';
    clearInterval(videoEndInterval);
    if (player) {
      player.stopVideo();
      player.loadVideoById({ videoId: 'vBfPzVd0y1s', startSeconds: 0 });
      currentVideoEndTime = -1;
    }

    // ÏÉàÎ°úÏö¥ Í≤åÏûÑ ÏãúÏûë Ïãú Î¨∏Ï†ú ÏàúÏÑú ÏÑûÍ∏∞
    shuffledQuestions = shuffleArray([...questions]); // ÏõêÎ≥∏ Î∞∞Ïó¥ÏùÑ ÌõºÏÜêÌïòÏßÄ ÏïäÍ∏∞ ÏúÑÌï¥ Î≥µÏÇ¨ ÌõÑ ÏÑûÍ∏∞
  }

  restartButton.addEventListener('click', () => {
    gameOverScreen.style.opacity = '0';
    gameOverScreen.style.transform = 'translateY(-20px)';
    setTimeout(() => {
      gameOverScreen.style.display = 'none';
      resetGameState(); // Îã§Ïãú ÏãúÏûë Ïãú ÏÉÅÌÉú Ï¥àÍ∏∞Ìôî Î∞è Î¨∏Ï†ú ÏÑûÍ∏∞
      showScreen(startScreen);
    }, 500);
  });

  returnToMenuBtn.addEventListener('click', () => {
    const confirmLeave = confirm('ÌÄ¥Ï¶à ÏßÑÌñâ Ï§ë Î©îÎâ¥Î°ú ÎèåÏïÑÍ∞ÄÎ©¥ ÌòÑÏû¨ ÏßÑÌñâ Ï†ïÎ≥¥Í∞Ä Ï¥àÍ∏∞ÌôîÎê©ÎãàÎã§. Í≥ÑÏÜçÌïòÏãúÍ≤†Ïñ¥Ïöî?');
    if (confirmLeave) {
      resetGameState(); // Î©îÎâ¥Î°ú ÎèåÏïÑÍ∞à Îïå ÏÉÅÌÉú Ï¥àÍ∏∞Ìôî Î∞è Î¨∏Ï†ú ÏÑûÍ∏∞
      hideAllScreens();
      showScreen(startScreen);
    }
  });

  // --- Ï¥àÍ∏∞ Î°úÎìú Ïãú Ïã§Ìñâ ---
  loadSettings();
  populatePatchNotes(); // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ìå®ÏπòÎÖ∏Ìä∏ ÎÇ¥Ïö© Ï±ÑÏö∞Í∏∞ (Ï†ïÎ†¨Îêú Î∞©ÏãùÏúºÎ°ú)
  // Ï≤òÏùå ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Í≤åÏûÑ ÏÉÅÌÉú Ï¥àÍ∏∞Ìôî Î∞è Î¨∏Ï†ú ÏÑûÍ∏∞
  // Ïù¥Î†áÍ≤å ÌïòÎ©¥ ÏãúÏûë Î≤ÑÌäº ÎàÑÎ•¥ÏûêÎßàÏûê Ï≤´ Í≤åÏûÑ ÏÑ∏ÏÖòÏù¥ Î∞îÎ°ú ÎûúÎç§ ÏàúÏÑúÎ°ú Ï§ÄÎπÑÎê®
  resetGameState();
</script>
</body>
</html>